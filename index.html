<!DOCTYPE html>
<html>
<head>
  <title>ARè¡—ã¥ãã‚Šã‚²ãƒ¼ãƒ </title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <!-- ä¿®æ­£ï¼šæ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®AR.js -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">

<!-- ã‚¹ã‚³ã‚¢è¡¨ç¤º -->
<div style="position: fixed; top: 10px; left: 10px; font-size: 24px; color: white; z-index: 10; background: rgba(0,0,0,0.7); padding: 10px;">
  ã‚¹ã‚³ã‚¢: <span id="score">0</span>
</div>

<!-- å»ºç‰©é¸æŠãƒœã‚¿ãƒ³ -->
<div style="position: fixed; bottom: 10px; left: 10px; z-index: 10;">
  <button onclick="setBuilding('building1')" style="padding: 10px; margin: 5px; font-size: 16px;">ä½å®… (+5ç‚¹)</button>
  <button onclick="setBuilding('building2')" style="padding: 10px; margin: 5px; font-size: 16px;">ç—…é™¢ (+10ç‚¹)</button>
</div>

<a-scene 
  embedded 
  arjs='sourceType: webcam; debugUIEnabled: false;'
  vr-mode-ui="enabled: false"
  renderer="logarithmicDepthBuffer: true;"
>
  <!-- ãƒãƒ¼ã‚«ãƒ¼ -->
  <a-marker preset="hiro" emitevents="true" id="marker">
    <a-entity 
      id="building" 
      geometry="primitive: box; width: 1; height: 1; depth: 1" 
      material="color: red; metalness: 0.3; roughness: 0.7" 
      position="0 0.5 0"
      scale="1 1 1"
    ></a-entity>
  </a-marker>
  
  <a-entity camera></a-entity>
</a-scene>

<script>
let score = 0;

function setBuilding(name) {
  const building = document.querySelector('#building');
  
  if (name === 'building1') {
    // ä½å®… - é’ã„ç«‹æ–¹ä½“
    building.setAttribute('geometry', {
      primitive: 'box',
      width: 1,
      height: 1,
      depth: 1
    });
    building.setAttribute('material', {
      color: 'blue',
      metalness: 0.3,
      roughness: 0.7
    });
    score += 5;
  } else if (name === 'building2') {
    // ç—…é™¢ - ç·‘ã®å††æŸ±
    building.setAttribute('geometry', {
      primitive: 'cylinder',
      radius: 0.5,
      height: 1
    });
    building.setAttribute('material', {
      color: 'green',
      metalness: 0.3,
      roughness: 0.7
    });
    score += 10;
  }
  
  document.getElementById('score').innerText = score;
  console.log('å»ºç‰©å¤‰æ›´:', name, 'ã‚¹ã‚³ã‚¢:', score);
}

// ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šãƒãƒ¼ã‚«ãƒ¼æ¤œå‡ºæ™‚ã®ç¢ºèª
document.querySelector('#marker').addEventListener('markerFound', function() {
  console.log('ğŸ¯ ãƒãƒ¼ã‚«ãƒ¼ã‚’æ¤œå‡ºï¼å»ºç‰©ã‚’é…ç½®ã§ãã¾ã™');
});

document.querySelector('#marker').addEventListener('markerLost', function() {
  console.log('âŒ ãƒãƒ¼ã‚«ãƒ¼ã‚’è¦‹å¤±ã„ã¾ã—ãŸ');
});
</script>

</body>
</html>
