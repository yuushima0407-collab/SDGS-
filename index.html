<!DOCTYPE html>
<html>
<head>
  <title>ARテスト - 修正版</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <!-- 新しいバージョンのAR.jsを使用 -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
</head>
<body style="margin: 0;">
  
  <!-- デバッグ情報表示 -->
  <div style="position: fixed; top: 10px; left: 10px; color: white; background: rgba(0,0,0,0.8); padding: 10px; z-index: 1000; font-family: Arial;">
    <div>🔍 Hiroマーカーを映してください</div>
    <div id="status">状態: 読み込み中...</div>
  </div>

  <a-scene 
    embedded 
    arjs='sourceType: webcam; debugUIEnabled: true;'
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true;"
  >
    <!-- Hiroマーカー -->
    <a-marker preset='hiro' emitevents="true" id="hiro-marker">
      <a-box 
        position='0 0.5 0' 
        material='color: red;' 
        scale='1 1 1'
        id="target-object"
      ></a-box>
    </a-marker>
    
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // デバッグ用スクリプト
    document.addEventListener('DOMContentLoaded', function() {
      console.log('✅ ページ読み込み完了');
      
      const scene = document.querySelector('a-scene');
      const marker = document.querySelector('#hiro-marker');
      const statusDiv = document.querySelector('#status');
      
      scene.addEventListener('loaded', function() {
        console.log('✅ A-Frameシーン読み込み完了');
        statusDiv.textContent = '状態: カメラ起動待ち...';
      });
      
      // マーカー検出イベント
      marker.addEventListener('markerFound', function() {
        console.log('🎯 マーカーを検出しました！');
        statusDiv.textContent = '状態: マーカー検出中 ✅';
        statusDiv.style.color = 'lightgreen';
      });
      
      marker.addEventListener('markerLost', function() {
        console.log('❌ マーカーを見失いました');
        statusDiv.textContent = '状態: マーカーを探しています...';
        statusDiv.style.color = 'white';
      });
    });
  </script>
</body>
</html>
